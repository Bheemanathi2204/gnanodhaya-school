{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Mark Attendance</title>
    <link rel="stylesheet" href="{% static 'students/style.css' %}">
</head>
<body>

<div class="teacher-page">
<div class="teacher-card">

<h2>ğŸ“ Mark Attendance</h2>

<!-- ğŸ”¹ LOAD STUDENTS FORM (GET) -->
<form method="get">
    <input type="text" name="class" placeholder="Class" required>
    <input type="text" name="section" placeholder="Section" required>
    <input type="date" name="date" value="{{ selected_date|default:'' }}" required>
    <button type="submit" name="load">Load Students</button>
</form>

{% if students %}
<hr>

<!-- ğŸ”¹ SUBMIT ATTENDANCE FORM (POST) -->
<form method="post">
    {% csrf_token %}
    <input type="hidden" name="class" value="{{ class_name }}">
    <input type="hidden" name="section" value="{{ section }}">
    <input type="hidden" name="date" value="{{ selected_date }}">

    <table>
        <tr>
            <th>Roll No</th>
            <th>Student</th>
            <th>Present</th>
            <th>Absent</th>
        </tr>

        {% for student in students %}
        <tr>
            <td>{{ student.roll_number }}</td>
            <td>{{ student.user.username }}</td>
            <td>
                <input type="radio"
                name="status_{{ student.id }}"
                value="Present"
                    required>
            </td>

            <td>
                <input type="radio"
                name="status_{{ student.id }}"
                value="Absent">
            </td>
        </tr>
        {% endfor %}
    </table>

    <button type="submit">Submit Attendance</button>
</form>
{% endif %}


<a href="{% url 'teacher_dashboard' %}" class="back-link">â† Back</a>

</div>
</div>

</body>
</html>
